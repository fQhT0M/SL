# SL


писание данных
В проекте используются четыре набора данных, содержащие информацию о покупательском поведении, выручке, времени, проведённом на сайте, и прибыли магазина.

1. Файл market_file.csv
Содержит данные о поведении покупателя на сайте, о коммуникациях с ним и его продуктовом поведении.

Столбцы:

id — уникальный номер покупателя в корпоративной базе данных.
покупательская_активность — рассчитанный класс покупательской активности (целевой признак): "снизилась" или "прежний уровень".
тип_сервиса — уровень сервиса, например "премиум" и "стандарт".
разрешить_сообщать — можно ли присылать покупателю дополнительные предложения о товаре (согласие даёт сам покупатель).
маркет_актив_6_мес — среднемесячное количество маркетинговых коммуникаций (рассылки, звонки, реклама и т. д.) за последние 6 месяцев.
маркет_актив_тек_мес — количество маркетинговых коммуникаций в текущем месяце.
длительность — количество дней с момента регистрации покупателя на сайте.
акционные_покупки — среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев.
популярная_категория — наиболее часто покупаемая категория товаров за последние 6 месяцев.
средний_просмотр_категорий_за_визит — среднее количество категорий, которые покупатель просматривал за визит в течение последнего месяца.
неоплаченные_продукты_штук_квартал — количество товаров, оставленных в корзине без оплаты за последние 3 месяца.
ошибка_сервиса — количество сбоев на сайте, с которыми столкнулся покупатель.
страниц_за_визит — среднее количество страниц, просмотренных за один визит в течение последних 3 месяцев.
2. Файл market_money.csv
Содержит данные о выручке, которую приносит каждый покупатель магазину.

Столбцы:

id — уникальный номер покупателя в корпоративной базе данных.
период — период, за который зафиксирована выручка ("текущий_месяц", "предыдущий_месяц" и т. д.).
выручка — сумма выручки за указанный период.
3. Файл market_time.csv
Содержит информацию о времени, проведённом пользователем на сайте в разные периоды.

Столбцы:

id — уникальный номер покупателя в корпоративной базе данных.
период — период, за который зафиксировано общее время ("текущий_месяц", "предыдущий_месяц" и т. д.).
минут — количество минут, проведённых на сайте за период.
4. Файл money.csv
Содержит данные о средней месячной прибыли, которую получает магазин от продаж каждому покупателю за последние 3 месяца.

Столбцы:

id — уникальный номер покупателя в корпоративной базе данных.
прибыль — значение прибыли, полученной с покупателя за последние 3 месяца.
Особенности данных
Данные о выручке и времени на сайте (market_money.csv и market_time.csv) зафиксированы в разном формате: в одном столбце содержится информация по нескольким периодам. Для удобства анализа данные будут разделены на отдельные столбцы по каждому периоду.
В market_file.csv содержится целевая переменная покупательская_активность, которую предстоит предсказать.
Данные из money.csv не используются в моделировании, но будут полезны для сегментации клиентов и анализа их прибыльности.


Алгоритм выполнения:


Данные были загружены из файлов /datasets/market_file.csv, /datasets/market_money.csv, /datasets/market_time.csv и /datasets/money.csv. Проведена проверка соответствия данных описанию, учтены особенности форматов: некоторые файлы имели точку с запятой в качестве разделителя, а десятичные значения отделялись запятой.

Выполнена предобработка данных:

Проведена проверка на пропуски и дубликаты, выявленные проблемы устранены.
Определена корректность типов данных, выполнено их преобразование при необходимости.
Обработаны значения, которые могли повлиять на анализ, включая объединение данных в удобный для работы формат.
Проведен исследовательский анализ данных:

Изучена структура каждого набора данных.
Выделены клиенты с покупательской активностью не менее трех месяцев.
Построены визуализации для изучения распределения данных, выявления аномалий и тенденций.
Оформлены выводы по анализу клиентского поведения.
Объединены таблицы market_file.csv, market_money.csv, market_time.csv. Данные о выручке и времени на сайте из одного столбца были разделены на отдельные столбцы для каждого периода. Данные о прибыли из money.csv не использовались при моделировании.

Проведен корреляционный анализ количественных признаков:

Рассчитаны коэффициенты корреляции между признаками.
Выявлена мультиколлинеарность, при необходимости устранены избыточные признаки.
Определено, какие признаки оказывают наибольшее влияние на целевую переменную.
Применены пайплайны для подготовки данных и обучения моделей:

Использован ColumnTransformer для раздельной обработки количественных и категориальных признаков.
Категориальные признаки закодированы с помощью двух кодировщиков, количественные масштабированы двумя скейлерами.
Обучены четыре модели классификации: KNeighborsClassifier, DecisionTreeClassifier, LogisticRegression и SVC.
Для каждой модели выполнен подбор гиперпараметров с использованием выбранной метрики.
Определена лучшая модель по итогам сравнительного анализа.
Оценена важность признаков с помощью метода SHAP:

Построен график важности признаков.
Определены малозначимые и наиболее значимые признаки.
Выявлены ключевые факторы, влияющие на снижение покупательской активности, сделаны выводы о возможном использовании этих данных для бизнес-решений.
Проведена сегментация покупателей:

Использованы результаты моделирования и данные о прибыльности клиентов.
Проведено графическое и аналитическое исследование выбранного сегмента.
Предложены стратегии повышения покупательской активности сегмента.
Оформлены выводы о сегментах, выбранных для дополнительного исследования.
Итоговые выводы
Проведен анализ данных о покупательской активности, выявлены ключевые закономерности.
Разработана модель предсказания вероятности снижения активности, определена лучшая модель.
Проведен анализ важности признаков, выявлены основные факторы, влияющие на снижение покупательской активности.
Выполнена сегментация клиентов, предложены стратегии работы с одним из сегментов для увеличения выручки.
Сделаны выводы о возможных дальнейших шагах, включая улучшение модели и дополнительные бизнес-решения.
Полученные результаты помогут компании оптимизировать стратегию работы с клиентами, снизить потери от снижения покупательской активности и повысить прибыльность отдельных сегментов.
